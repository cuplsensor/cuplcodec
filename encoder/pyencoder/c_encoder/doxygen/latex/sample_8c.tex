\hypertarget{sample_8c}{}\section{sample.\+c File Reference}
\label{sample_8c}\index{sample.\+c@{sample.\+c}}
{\ttfamily \#include \char`\"{}sample.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}octet.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ndef.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}smplhist.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}prng.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}defs.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}batv.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}base64.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}nvtype.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structstatus}{status}}
\item 
struct \mbox{\hyperlink{structendstop}{endstop}}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sample_8c_a649a882141d51724d0851c5637ae9b52}{T\+E\+M\+P\+RH}}~\textquotesingle{}1\textquotesingle{}
\item 
\#define \mbox{\hyperlink{sample_8c_ae8b2d876f1eb3087a5859e78688c5169}{T\+E\+M\+P\+O\+N\+LY}}~\textquotesingle{}2\textquotesingle{}
\item 
\#define \mbox{\hyperlink{sample_8c_a639bc14d5477eb6e1bbbdaec7ea6fd8c}{E\+N\+D\+S\+T\+O\+P\+\_\+\+B\+Y\+TE}}~\textquotesingle{}$\sim$\textquotesingle{}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structstatus}{status}} \mbox{\hyperlink{sample_8c_a5da5b85f337f4f42a9a64c2ce881fc33}{stat\+\_\+t}}
\item 
typedef struct \mbox{\hyperlink{structendstop}{endstop}} \mbox{\hyperlink{sample_8c_ae17bc26975847c791058e10b0c376dfa}{endstop\+\_\+t}}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{sample_8c_a330856ff01a76092fb302f70696dcaa8}{urlstate}} \{ \mbox{\hyperlink{sample_8c_a330856ff01a76092fb302f70696dcaa8a335559f3d0770f8905099143d5fdfc68}{first\+\_\+tick}}, 
\mbox{\hyperlink{sample_8c_a330856ff01a76092fb302f70696dcaa8ae4aa5da2d1ebb43ca39a9ecf8e0adf80}{first\+\_\+tock}}, 
\mbox{\hyperlink{sample_8c_a330856ff01a76092fb302f70696dcaa8abe4c377a0e72bf9ac494563b516341c6}{final\+\_\+tick}}, 
\mbox{\hyperlink{sample_8c_a330856ff01a76092fb302f70696dcaa8a00bd38fad6dca592789a78004554929e}{final\+\_\+tock}}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{sample_8c_a5151eadd9598643455abc107fb73f083}{sample\+\_\+init}} (unsigned int stat, bool err)
\begin{DoxyCompactList}\small\item\em Initialise the sample state machine. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sample_8c_a130e5805e5b411b541e60ee607185b98}{sample\+\_\+updateendstop}} (unsigned int minutes)
\begin{DoxyCompactList}\small\item\em Update the base64 encoded endstop and write it to the tag. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sample_8c_a5be5f77a339896373b1b5fff87fbfbcd}{sample\+\_\+push}} (int meas1, int meas2)
\begin{DoxyCompactList}\small\item\em Append a sample containing up to two measurands onto the circular buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{nvtype_8h_a78682d319c0de97ea2b35f88095d6e57}{nv\+\_\+t}} \mbox{\hyperlink{sample_8c_a6cdeaaf5e3ea4f68f2d041a6d6389a70}{nv}}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{sample_8c_a639bc14d5477eb6e1bbbdaec7ea6fd8c}\label{sample_8c_a639bc14d5477eb6e1bbbdaec7ea6fd8c}} 
\index{sample.\+c@{sample.\+c}!E\+N\+D\+S\+T\+O\+P\+\_\+\+B\+Y\+TE@{E\+N\+D\+S\+T\+O\+P\+\_\+\+B\+Y\+TE}}
\index{E\+N\+D\+S\+T\+O\+P\+\_\+\+B\+Y\+TE@{E\+N\+D\+S\+T\+O\+P\+\_\+\+B\+Y\+TE}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{E\+N\+D\+S\+T\+O\+P\+\_\+\+B\+Y\+TE}{ENDSTOP\_BYTE}}
{\footnotesize\ttfamily \#define E\+N\+D\+S\+T\+O\+P\+\_\+\+B\+Y\+TE~\textquotesingle{}$\sim$\textquotesingle{}}

Last character of the endstop. Must be U\+RL safe according to R\+FC 1738. \mbox{\Hypertarget{sample_8c_ae8b2d876f1eb3087a5859e78688c5169}\label{sample_8c_ae8b2d876f1eb3087a5859e78688c5169}} 
\index{sample.\+c@{sample.\+c}!T\+E\+M\+P\+O\+N\+LY@{T\+E\+M\+P\+O\+N\+LY}}
\index{T\+E\+M\+P\+O\+N\+LY@{T\+E\+M\+P\+O\+N\+LY}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{T\+E\+M\+P\+O\+N\+LY}{TEMPONLY}}
{\footnotesize\ttfamily \#define T\+E\+M\+P\+O\+N\+LY~\textquotesingle{}2\textquotesingle{}}

Last character of the U\+RL version string if the U\+RL contains only temperature measurands. \mbox{\Hypertarget{sample_8c_a649a882141d51724d0851c5637ae9b52}\label{sample_8c_a649a882141d51724d0851c5637ae9b52}} 
\index{sample.\+c@{sample.\+c}!T\+E\+M\+P\+RH@{T\+E\+M\+P\+RH}}
\index{T\+E\+M\+P\+RH@{T\+E\+M\+P\+RH}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{T\+E\+M\+P\+RH}{TEMPRH}}
{\footnotesize\ttfamily \#define T\+E\+M\+P\+RH~\textquotesingle{}1\textquotesingle{}}

Last character of the U\+RL version string if the U\+RL contains both temperature and relative humidity measurands. 

\subsection{Typedef Documentation}
\mbox{\Hypertarget{sample_8c_ae17bc26975847c791058e10b0c376dfa}\label{sample_8c_ae17bc26975847c791058e10b0c376dfa}} 
\index{sample.\+c@{sample.\+c}!endstop\+\_\+t@{endstop\+\_\+t}}
\index{endstop\+\_\+t@{endstop\+\_\+t}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{endstop\+\_\+t}{endstop\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structendstop}{endstop}}  \mbox{\hyperlink{sample_8c_ae17bc26975847c791058e10b0c376dfa}{endstop\+\_\+t}}}

\mbox{\Hypertarget{sample_8c_a5da5b85f337f4f42a9a64c2ce881fc33}\label{sample_8c_a5da5b85f337f4f42a9a64c2ce881fc33}} 
\index{sample.\+c@{sample.\+c}!stat\+\_\+t@{stat\+\_\+t}}
\index{stat\+\_\+t@{stat\+\_\+t}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{stat\+\_\+t}{stat\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structstatus}{status}}  \mbox{\hyperlink{sample_8c_a5da5b85f337f4f42a9a64c2ce881fc33}{stat\+\_\+t}}}



\subsection{Enumeration Type Documentation}
\mbox{\Hypertarget{sample_8c_a330856ff01a76092fb302f70696dcaa8}\label{sample_8c_a330856ff01a76092fb302f70696dcaa8}} 
\index{sample.\+c@{sample.\+c}!urlstate@{urlstate}}
\index{urlstate@{urlstate}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{urlstate}{urlstate}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{sample_8c_a330856ff01a76092fb302f70696dcaa8}{urlstate}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{first\+\_\+tick@{first\+\_\+tick}!sample.\+c@{sample.\+c}}\index{sample.\+c@{sample.\+c}!first\+\_\+tick@{first\+\_\+tick}}}\mbox{\Hypertarget{sample_8c_a330856ff01a76092fb302f70696dcaa8a335559f3d0770f8905099143d5fdfc68}\label{sample_8c_a330856ff01a76092fb302f70696dcaa8a335559f3d0770f8905099143d5fdfc68}} 
first\+\_\+tick&Write both meaurands in the first sample of samplebuf \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{first\+\_\+tock@{first\+\_\+tock}!sample.\+c@{sample.\+c}}\index{sample.\+c@{sample.\+c}!first\+\_\+tock@{first\+\_\+tock}}}\mbox{\Hypertarget{sample_8c_a330856ff01a76092fb302f70696dcaa8ae4aa5da2d1ebb43ca39a9ecf8e0adf80}\label{sample_8c_a330856ff01a76092fb302f70696dcaa8ae4aa5da2d1ebb43ca39a9ecf8e0adf80}} 
first\+\_\+tock&Overwrite measurand 2 in the first sample of samplebuf. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{final\+\_\+tick@{final\+\_\+tick}!sample.\+c@{sample.\+c}}\index{sample.\+c@{sample.\+c}!final\+\_\+tick@{final\+\_\+tick}}}\mbox{\Hypertarget{sample_8c_a330856ff01a76092fb302f70696dcaa8abe4c377a0e72bf9ac494563b516341c6}\label{sample_8c_a330856ff01a76092fb302f70696dcaa8abe4c377a0e72bf9ac494563b516341c6}} 
final\+\_\+tick&Write both measurands in the second sample of samplebuf. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{final\+\_\+tock@{final\+\_\+tock}!sample.\+c@{sample.\+c}}\index{sample.\+c@{sample.\+c}!final\+\_\+tock@{final\+\_\+tock}}}\mbox{\Hypertarget{sample_8c_a330856ff01a76092fb302f70696dcaa8a00bd38fad6dca592789a78004554929e}\label{sample_8c_a330856ff01a76092fb302f70696dcaa8a00bd38fad6dca592789a78004554929e}} 
final\+\_\+tock&Overwrite measurand 2 in the second sample of samplebuf. \\
\hline

\end{DoxyEnumFields}


\subsection{Function Documentation}
\mbox{\Hypertarget{sample_8c_a5151eadd9598643455abc107fb73f083}\label{sample_8c_a5151eadd9598643455abc107fb73f083}} 
\index{sample.\+c@{sample.\+c}!sample\+\_\+init@{sample\+\_\+init}}
\index{sample\+\_\+init@{sample\+\_\+init}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{sample\+\_\+init()}{sample\_init()}}
{\footnotesize\ttfamily void sample\+\_\+init (\begin{DoxyParamCaption}\item[{unsigned int}]{stat,  }\item[{bool}]{err }\end{DoxyParamCaption})}



Initialise the sample state machine. 


\begin{DoxyParams}{Parameters}
{\em stat} & 16-\/bit status value. \\
\hline
{\em err} & Sets an error condition where data will not be logged to the U\+RL circular buffer. \\
\hline
{\em temponly} & When true only temperature measurands will be recorded to the circular buffer on each call of \mbox{\hyperlink{sample_8c_a5be5f77a339896373b1b5fff87fbfbcd}{sample\+\_\+push()}}. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{sample_8c_a5be5f77a339896373b1b5fff87fbfbcd}\label{sample_8c_a5be5f77a339896373b1b5fff87fbfbcd}} 
\index{sample.\+c@{sample.\+c}!sample\+\_\+push@{sample\+\_\+push}}
\index{sample\+\_\+push@{sample\+\_\+push}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{sample\+\_\+push()}{sample\_push()}}
{\footnotesize\ttfamily int sample\+\_\+push (\begin{DoxyParamCaption}\item[{int}]{meas1,  }\item[{int}]{meas2 }\end{DoxyParamCaption})}



Append a sample containing up to two measurands onto the circular buffer. 


\begin{DoxyParams}{Parameters}
{\em meas1} & Measurand 1 e.\+g. temperature. \\
\hline
{\em meas2} & Measurand 2 e.\+g. relative humidity.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if the cursor has moved from the end to the start and data are being overwritten. Otherwise 0. 
\end{DoxyReturn}
\mbox{\Hypertarget{sample_8c_a130e5805e5b411b541e60ee607185b98}\label{sample_8c_a130e5805e5b411b541e60ee607185b98}} 
\index{sample.\+c@{sample.\+c}!sample\+\_\+updateendstop@{sample\+\_\+updateendstop}}
\index{sample\+\_\+updateendstop@{sample\+\_\+updateendstop}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{sample\+\_\+updateendstop()}{sample\_updateendstop()}}
{\footnotesize\ttfamily void sample\+\_\+updateendstop (\begin{DoxyParamCaption}\item[{unsigned int}]{minutes }\end{DoxyParamCaption})}



Update the base64 encoded endstop and write it to the tag. 


\begin{DoxyParams}{Parameters}
{\em minutes} & Minutes elapsed since the previous sample. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\mbox{\Hypertarget{sample_8c_a6cdeaaf5e3ea4f68f2d041a6d6389a70}\label{sample_8c_a6cdeaaf5e3ea4f68f2d041a6d6389a70}} 
\index{sample.\+c@{sample.\+c}!nv@{nv}}
\index{nv@{nv}!sample.\+c@{sample.\+c}}
\subsubsection{\texorpdfstring{nv}{nv}}
{\footnotesize\ttfamily \mbox{\hyperlink{nvtype_8h_a78682d319c0de97ea2b35f88095d6e57}{nv\+\_\+t}} nv}

Externally defined parameters stored in non-\/volatile memory. 