
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>URL Decoder Reference &#8212; PSCodec 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="URL Encoder Reference" href="encoder.html" />
    <link rel="prev" title="Test" href="../tutorial/test.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="url-decoder-reference">
<h1>URL Decoder Reference<a class="headerlink" href="#url-decoder-reference" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="urldecoder.urldecoder.UrlDecoder">
<em class="property">class </em><code class="descclassname">urldecoder.urldecoder.</code><code class="descname">UrlDecoder</code><span class="sig-paren">(</span><em>secretkey</em>, <em>statb64</em>, <em>timeintb64</em>, <em>circb64</em>, <em>ver</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/urldecoder/urldecoder.html#UrlDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urldecoder.urldecoder.UrlDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a UrlDecoder object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>secretkey</strong> – Secret Key string.</li>
<li><strong>**reqargs</strong> – A list of query string parameters</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="urldecoder.urldecoder.UrlDecoder.getarg">
<code class="descname">getarg</code><span class="sig-paren">(</span><em>arg</em>, <em>reqargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/urldecoder/urldecoder.html#UrlDecoder.getarg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urldecoder.urldecoder.UrlDecoder.getarg" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a parameter by name from a list of query string parameters.</p>
<p>Raises an error if no key is found.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>arg</strong> – Name of the parameter to find.</li>
<li><strong>reqargs</strong> – List of parameters.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Value of the parameter from the list.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="urldecoder.urldecoder.UrlDecoder.timeinterval">
<code class="descname">timeinterval</code><span class="sig-paren">(</span><em>enctimeint</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/urldecoder/urldecoder.html#UrlDecoder.timeinterval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urldecoder.urldecoder.UrlDecoder.timeinterval" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the time interval in minutes from a URL parameter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>enctimeint</strong> – Time interval in little endian byte order encoded as base64.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Time interval in minutes</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="urldecoder.urldecoder.TDecoder">
<em class="property">class </em><code class="descclassname">urldecoder.urldecoder.</code><code class="descname">TDecoder</code><span class="sig-paren">(</span><em>encstr</em>, <em>timestamped</em>, <em>timeintminutes</em>, <em>secretkey</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/urldecoder/tdecoder.html#TDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urldecoder.urldecoder.TDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts temperature samples from the circular buffer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>encstr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Circular buffer string containing temperature samples encoded in base64.</li>
<li><strong>timestamped</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Indicates whether or not to timestamp the returned samples.</li>
<li><strong>timeintminutes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Time interval between samples in minutes.</li>
<li><strong>secretkey</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Secret key used to verify the source of the samples.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="urldecoder.urldecoder.HTDecoder">
<em class="property">class </em><code class="descclassname">urldecoder.urldecoder.</code><code class="descname">HTDecoder</code><span class="sig-paren">(</span><em>encstr</em>, <em>timestamped</em>, <em>timeintminutes</em>, <em>secretkey</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/urldecoder/htdecoder.html#HTDecoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urldecoder.urldecoder.HTDecoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts samples containing 2 measurands (temperature and humidity) from the circular buffer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>encstr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Circular buffer string containing samples encoded in base64.</li>
<li><strong>timestamped</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Indicates whether or not to timestamp the returned samples.</li>
<li><strong>timeintminutes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Time interval between samples in minutes.</li>
<li><strong>secretkey</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Secret key used to verify the source of the samples.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="urldecoder.decoder.Decoder">
<em class="property">class </em><code class="descclassname">urldecoder.decoder.</code><code class="descname">Decoder</code><span class="sig-paren">(</span><em>encstr</em>, <em>secretkey</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/urldecoder/decoder.html#Decoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#urldecoder.decoder.Decoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract raw sample data from the circular buffer</p>
<p>First the endstop marker is found, which is the character ‘~’.</p>
<p>Next the marker is replaced with ‘=’ and combined with the 3 bytes preceeding it.
These are base64 decoded to yield the minutes elapsed since the
previous sample and a psuedorandom number.</p>
<p>The circular buffer is made linear by concatenating the two parts of the buffer
either side of the end stop.</p>
<p>3 bytes are popped from the end of the linear buffer. These contain information
such as the HMAC and the number of valid samples.</p>
<p>The remaining data in the linear buffer are shaped into a list of 8 byte chunks
(these should be renamed to Octets).</p>
<p>Starting from the newest octet, each is decoded into a 6 byte chunk.</p>
<p>Either 1 or 2 (3 byte) samples are extracted from every chunk and these
are written to a list.</p>
<p>When the complete list of samples have been obtained, the HMAC checksum is
calculated. This is compared to the HMAC supplied in the URL. These two
values must match for the decoded data to be valid. If they are, it confirms
that whatever generated the encoded list of samples must have the secret key.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>encstr</strong> – Circular buffer string containing samples and an endstop encoded as base64.</li>
<li><strong>secretkey</strong> – Secret key used to verify that the circular buffer has originated from a trusted source.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">PSCodec</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">PSCodec</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/encoder.html">Encoder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/decoder.html">Decoder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/test.html">Test</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">URL Decoder Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="encoder.html">URL Encoder Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyencoder.html">Python Wrapped Encoder (PyEncoder) Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../tutorial/test.html" title="previous chapter">Test</a></li>
      <li>Next: <a href="encoder.html" title="next chapter">URL Encoder Reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Malcolm Mackay.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/docs/reference/urldecoder.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>